#!/usr/bin/env ruby

# enable end-to-end testing via cucumber to still generate accurate coverage reports
if ENV['YO_IM_TESTING_README_SHIT_RIGHT_NOW'] == 'FOR_REALSIES'
  Dir.chdir File.dirname File.dirname __FILE__ do
    require 'simplecov'
  end
end

$LOAD_PATH.unshift File.expand_path('../../lib/', __FILE__)
require 'readme_tester'

Deject.register(:stdin)      { $stdin }
Deject.register(:stdout)     { $stdout }
Deject.register(:stderr)     { $stderr }
Deject.register(:file_class) { ReadmeTester::File }

exit ReadmeTester ARGV
